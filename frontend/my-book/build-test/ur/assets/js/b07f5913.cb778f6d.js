"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[1556],{7863:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"chapters/module1-architecture","title":"module1-architecture","description":"\x3c!--","source":"@site/i18n/ur/docusaurus-plugin-content-docs/current/chapters/module1-architecture.md","sourceDirName":"chapters","slug":"/chapters/module1-architecture","permalink":"/ur/docs/chapters/module1-architecture","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"sanastudent","lastUpdatedAt":1765357874000,"frontMatter":{},"sidebar":"bookSidebar","previous":{"title":"\u0645\u0648\u0688\u06cc\u0648\u0644 1: ROS 2 \u06a9\u0627 \u062a\u0639\u0627\u0631\u0641","permalink":"/ur/docs/chapters/module1-intro"},"next":{"title":"module1-communication","permalink":"/ur/docs/chapters/module1-communication"}}');var s=r(4848),l=r(8453);const a={},t="[Urdu Translation Required]",o={},c=[{value:"System Architecture",id:"system-architecture",level:2},{value:"Communication Layers",id:"communication-layers",level:2},{value:"1. Application Layer",id:"1-application-layer",level:3},{value:"2. ROS 2 Client Library (RCL)",id:"2-ros-2-client-library-rcl",level:3},{value:"3. ROS Middleware (RMW)",id:"3-ros-middleware-rmw",level:3},{value:"4. DDS Layer",id:"4-dds-layer",level:3},{value:"Design Patterns",id:"design-patterns",level:2},{value:"Separation of Concerns",id:"separation-of-concerns",level:3},{value:"Composition",id:"composition",level:3},{value:"Lifecycle Management",id:"lifecycle-management",level:2},{value:"Example: Temperature Monitor",id:"example-temperature-monitor",level:2},{value:"Package Organization",id:"package-organization",level:2},{value:"Standard Package Structure",id:"standard-package-structure",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Namespaces",id:"1-use-namespaces",level:3},{value:"2. Parameter Files",id:"2-parameter-files",level:3},{value:"3. Logging Levels",id:"3-logging-levels",level:3},{value:"Exercise: Lifecycle Node",id:"exercise-lifecycle-node",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"urdu-translation-required",children:"[Urdu Translation Required]"})}),"\n",(0,s.jsx)(n.p,{children:"\u06cc\u06c1\u0627\u06ba \u0627\u0631\u062f\u0648 \u062a\u0631\u062c\u0645\u06c1 \u0634\u0627\u0645\u0644 \u06a9\u0631\u06cc\u06ba\r\n(Add Urdu translation here)"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Original English Content (for reference):"})}),"\n",(0,s.jsx)(n.h1,{id:"ros-2-architecture-and-design-patterns",children:"ROS 2 Architecture and Design Patterns"}),"\n",(0,s.jsx)(n.h2,{id:"system-architecture",children:"System Architecture"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 follows a distributed, modular architecture that enables flexibility and scalability in robotic systems."}),"\n",(0,s.jsx)(n.h2,{id:"communication-layers",children:"Communication Layers"}),"\n",(0,s.jsx)(n.h3,{id:"1-application-layer",children:"1. Application Layer"}),"\n",(0,s.jsx)(n.p,{children:"Your custom nodes and packages that implement robot behaviors."}),"\n",(0,s.jsx)(n.h3,{id:"2-ros-2-client-library-rcl",children:"2. ROS 2 Client Library (RCL)"}),"\n",(0,s.jsx)(n.p,{children:"Language-agnostic core functionality:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Node lifecycle management"}),"\n",(0,s.jsx)(n.li,{children:"Communication patterns"}),"\n",(0,s.jsx)(n.li,{children:"Parameter handling"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-ros-middleware-rmw",children:"3. ROS Middleware (RMW)"}),"\n",(0,s.jsx)(n.p,{children:"Abstraction layer over DDS implementations:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fast DDS (default)"}),"\n",(0,s.jsx)(n.li,{children:"Cyclone DDS"}),"\n",(0,s.jsx)(n.li,{children:"RTI Connext DDS"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-dds-layer",children:"4. DDS Layer"}),"\n",(0,s.jsx)(n.p,{children:"Underlying communication protocol handling discovery, serialization, and transport."}),"\n",(0,s.jsx)(n.h2,{id:"design-patterns",children:"Design Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"separation-of-concerns",children:"Separation of Concerns"}),"\n",(0,s.jsx)(n.p,{children:"Break complex functionality into focused nodes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Bad: Monolithic node\r\nclass RobotNode:\r\n    def __init__(self):\r\n        self.camera = Camera()\r\n        self.vision = VisionProcessor()\r\n        self.planner = PathPlanner()\r\n        self.controller = MotorController()\r\n    # Everything in one place!\r\n\r\n# Good: Modular design\r\nclass CameraNode:  # Only handles camera\r\nclass VisionNode:  # Only processes images\r\nclass PlannerNode:  # Only plans paths\r\nclass ControlNode:  # Only controls motors\n"})}),"\n",(0,s.jsx)(n.h3,{id:"composition",children:"Composition"}),"\n",(0,s.jsx)(n.p,{children:"Combine multiple nodes in a single process for efficiency:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from rclpy.node import Node\r\n\r\nclass SensorFusion(Node):\r\n    """Combines IMU and wheel odometry"""\r\n    def __init__(self):\r\n        super().__init__(\'sensor_fusion\')\r\n        self.imu_sub = self.create_subscription(...)\r\n        self.odom_sub = self.create_subscription(...)\r\n        self.fused_pub = self.create_publisher(...)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"lifecycle-management",children:"Lifecycle Management"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 provides managed nodes with defined states:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[Unconfigured] --configure--\x3e [Inactive] --activate--\x3e [Active]\r\n                                   ^                      |\r\n                                   |                      |\r\n                                   +----- deactivate -----+\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Controlled startup sequences"}),"\n",(0,s.jsx)(n.li,{children:"Error recovery"}),"\n",(0,s.jsx)(n.li,{children:"Resource management"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"example-temperature-monitor",children:"Example: Temperature Monitor"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from lifecycle_msgs.msg import Transition\r\nfrom rclpy.lifecycle import LifecycleNode, LifecycleState\r\n\r\nclass TempMonitor(LifecycleNode):\r\n    def __init__(self):\r\n        super().__init__('temp_monitor')\r\n\r\n    def on_configure(self, state: LifecycleState):\r\n        self.get_logger().info('Configuring sensor...')\r\n        self.sensor = self.init_sensor()\r\n        return Transition.TRANSITION_CALLBACK_SUCCESS\r\n\r\n    def on_activate(self, state: LifecycleState):\r\n        self.get_logger().info('Starting monitoring...')\r\n        self.timer = self.create_timer(1.0, self.check_temp)\r\n        return Transition.TRANSITION_CALLBACK_SUCCESS\r\n\r\n    def check_temp(self):\r\n        temp = self.sensor.read()\r\n        if temp > 80:\r\n            self.get_logger().warn(f'High temperature: {temp}C')\n"})}),"\n",(0,s.jsx)(n.h2,{id:"package-organization",children:"Package Organization"}),"\n",(0,s.jsx)(n.h3,{id:"standard-package-structure",children:"Standard Package Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my_robot_pkg/\r\n\u251c\u2500\u2500 package.xml           # Package metadata\r\n\u251c\u2500\u2500 setup.py             # Python package setup\r\n\u251c\u2500\u2500 my_robot_pkg/\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 nodes/           # Node implementations\r\n\u2502   \u251c\u2500\u2500 utils/           # Helper functions\r\n\u2502   \u2514\u2500\u2500 config/          # Configuration files\r\n\u251c\u2500\u2500 launch/              # Launch files\r\n\u251c\u2500\u2500 config/              # YAML configs\r\n\u251c\u2500\u2500 rviz/               # RViz configs\r\n\u2514\u2500\u2500 test/               # Unit tests\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-use-namespaces",children:"1. Use Namespaces"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Organize topics hierarchically\r\n/robot1/camera/image\r\n/robot1/lidar/scan\r\n/robot2/camera/image\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-parameter-files",children:"2. Parameter Files"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# config/robot_params.yaml\r\nrobot_node:\r\n  ros__parameters:\r\n    max_speed: 1.0\r\n    update_rate: 50\r\n    use_sim_time: false\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-logging-levels",children:"3. Logging Levels"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"self.get_logger().debug('Detailed info')\r\nself.get_logger().info('General info')\r\nself.get_logger().warn('Warning condition')\r\nself.get_logger().error('Error occurred')\r\nself.get_logger().fatal('Critical failure')\n"})}),"\n",(0,s.jsx)(n.h2,{id:"exercise-lifecycle-node",children:"Exercise: Lifecycle Node"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Task"}),": Create a lifecycle node for a robot arm controller."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Configure: Initialize motor drivers"}),"\n",(0,s.jsx)(n.li,{children:"Activate: Enable motors and start control loop"}),"\n",(0,s.jsx)(n.li,{children:"Deactivate: Stop control loop, keep motors enabled"}),"\n",(0,s.jsx)(n.li,{children:"Cleanup: Shutdown motor drivers"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2713 Understood ROS 2 layered architecture"}),"\n",(0,s.jsx)(n.li,{children:"\u2713 Learned design patterns for modular systems"}),"\n",(0,s.jsx)(n.li,{children:"\u2713 Explored lifecycle management"}),"\n",(0,s.jsx)(n.li,{children:"\u2713 Best practices for package organization"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Next, we'll explore communication patterns in detail."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Image Placeholder"}),": [Architecture diagram showing ROS 2 layers]"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Citation"}),": ROS 2 Design Documentation. ",(0,s.jsx)(n.a,{href:"https://design.ros2.org/",children:"https://design.ros2.org/"})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>t});var i=r(6540);const s={},l=i.createContext(s);function a(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);