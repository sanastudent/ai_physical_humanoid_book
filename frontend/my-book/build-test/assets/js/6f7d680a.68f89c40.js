"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[8777],{6548:(e,s,r)=>{r.r(s),r.d(s,{default:()=>u});var a=r(6540),i=r(1656),l=r(9785),o=r(8871),n=r(3453),c=r(4586),t=r(4848);const m=n.Ik({email:n.Yj().min(1,"Email is required").email("Please enter a valid email address"),password:n.Yj().min(1,"Password is required"),rememberMe:n.zM().optional()}),d=({onSigninSuccess:e})=>{const[s,r]=(0,a.useState)(!1),[i,n]=(0,a.useState)(null),{register:d,handleSubmit:h,formState:{errors:u}}=(0,l.mN)({resolver:(0,o.u)(m),defaultValues:{rememberMe:!1}});return(0,t.jsx)("div",{className:"auth-form-container",children:(0,t.jsxs)("div",{className:"auth-form-card",children:[(0,t.jsx)("h2",{className:"auth-form-title",children:"Welcome Back"}),(0,t.jsx)("p",{className:"auth-form-subtitle",children:"Sign in to access your personalized content"}),(0,t.jsxs)("form",{onSubmit:h(async s=>{r(!0),n(null);try{const{siteConfig:r}=(0,c.A)(),a=r.customFields?.backendUrl||"http://localhost:8000",i=await fetch(`${a}/auth/signin`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:s.email,password:s.password,remember_me:s.rememberMe||!1})});if(!i.ok){const e=await i.json();if(401===i.status)throw new Error("Invalid email or password. Please try again.");throw new Error(e.detail||"Failed to sign in")}e()}catch(a){a instanceof Error?n(a.message):n("An unexpected error occurred. Please try again.")}finally{r(!1)}}),className:"auth-form",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,t.jsx)("input",{id:"email",type:"email",className:"form-input "+(u.email?"form-input-error":""),placeholder:"you@example.com",...d("email"),disabled:s,autoComplete:"email"}),u.email&&(0,t.jsx)("p",{className:"form-error",children:u.email.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",className:"form-input "+(u.password?"form-input-error":""),placeholder:"Enter your password",...d("password"),disabled:s,autoComplete:"current-password"}),u.password&&(0,t.jsx)("p",{className:"form-error",children:u.password.message})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{className:"checkbox-label remember-me",children:[(0,t.jsx)("input",{type:"checkbox",...d("rememberMe"),disabled:s}),(0,t.jsx)("span",{children:"Remember me for 30 days"})]}),(0,t.jsx)("p",{className:"form-hint",children:"Keep me signed in on this device (extends session from 24 hours to 30 days)"})]}),i&&(0,t.jsxs)("div",{className:"form-error-banner",children:[(0,t.jsx)("svg",{className:"form-error-icon",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),i]}),(0,t.jsx)("button",{type:"submit",className:"form-submit-button",disabled:s,children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"form-spinner",viewBox:"0 0 24 24",children:(0,t.jsx)("circle",{className:"form-spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"})}),"Signing In..."]}):"Sign In"})]}),(0,t.jsx)("div",{className:"auth-form-footer",children:(0,t.jsxs)("p",{children:["Don't have an account?"," ",(0,t.jsx)("a",{href:"/signup",className:"auth-link",children:"Sign up"})]})})]})})};var h=r(6347);const u=()=>{const e=(0,h.W6)();return(0,t.jsx)(i.A,{title:"Sign In",description:"Sign in to access your personalized learning experience",children:(0,t.jsx)("main",{children:(0,t.jsx)(d,{onSigninSuccess:()=>{const s=new URLSearchParams(window.location.search).get("redirect")||"/";e.push(s)}})})})}}}]);